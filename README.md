# 아이샵케어 5차 이벤트 - 신분증 이미지 업로드

## ⚠️ 중요: CORS 문제 해결

**HTML 파일을 직접 더블클릭해서 열면 구글 드라이브 업로드가 작동하지 않습니다!**

반드시 **로컬 웹 서버**를 통해 실행해야 합니다.

## 🚀 실행 방법

### 방법 1: 자동 스크립트 사용 (추천)

**Mac/Linux:**
```bash
./start-server.sh
```

**Windows:**
```bash
start-server.bat
```

그 다음 브라우저에서 `http://localhost:8000` 을 열어주세요.

### 방법 2: 수동으로 서버 실행

**Python 사용:**
```bash
python3 -m http.server 8000
# 또는
python -m http.server 8000
```

**Node.js 사용:**
```bash
npx http-server -p 8000
```

그 다음 브라우저에서 `http://localhost:8000` 을 열어주세요.

## 📋 구글 드라이브 연동 설정

1. **구글 드라이브 폴더 생성**
   - 구글 드라이브에서 업로드를 받을 폴더를 만듭니다
   - 폴더를 열고 URL에서 폴더 ID를 복사합니다
   - 예: `https://drive.google.com/drive/folders/1a2b3c4d5e6f7g8h9i0j`
   - 여기서 `1a2b3c4d5e6f7g8h9i0j` 부분이 폴더 ID입니다

2. **Google Apps Script 설정**
   - 구글 드라이브에서 "새로 만들기" > "Google Apps Script" 선택
   - `apps-script-code.gs` 파일의 내용을 복사해서 붙여넣기
   - `FOLDER_ID`를 위에서 복사한 폴더 ID로 변경
   - 저장 후 "배포" > "새 배포" 선택
   - 유형: **웹 앱**
   - 실행 권한: **본인** (또는 **사용자 액세스 권한으로 실행**)
   - ⚠️ **액세스 권한: "링크가 있는 모든 사용자" 또는 "모든 사용자"** (반드시 확인!)
   - 배포 후 나온 **웹 앱 URL**을 복사
   - ⚠️ **403 에러가 발생하면**: 배포 설정에서 액세스 권한을 다시 확인하고, "새 버전으로 배포"를 선택하여 다시 배포하세요

3. **웹앱 URL 설정**
   - `script.js` 파일을 열고
   - 상단의 `UPLOAD_ENDPOINT` 변수에 복사한 웹앱 URL을 붙여넣기

## 🔍 문제 해결

### 이미지가 드라이브에 저장되지 않을 때

1. **브라우저 콘솔 확인**
   - F12를 눌러 개발자 도구 열기
   - 콘솔 탭에서 에러 메시지 확인
   - "업로드 시작", "응답 상태", "파싱된 결과" 등의 로그 확인

2. **Apps Script 확인**
   - Apps Script 에디터에서 실행 로그 확인
   - 폴더 ID가 올바른지 확인
   - 권한이 올바르게 설정되었는지 확인

3. **CORS 에러가 발생할 때**
   - 반드시 로컬 웹 서버를 통해 실행해야 합니다
   - `file://` 프로토콜로 직접 열면 CORS 에러가 발생합니다

## 📱 모바일에서 테스트

1. 컴퓨터와 모바일이 같은 Wi-Fi에 연결되어 있어야 합니다
2. 컴퓨터의 IP 주소 확인:
   - Mac: 시스템 설정 > 네트워크에서 IP 주소 확인
   - Windows: `ipconfig` 명령어로 IP 주소 확인
3. 로컬 웹 서버 실행
4. 모바일 브라우저에서 `http://[컴퓨터IP]:8000` 접속
   - 예: `http://192.168.0.100:8000`

